# 1. ë©”ì¸ ëœë”© í˜ì´ì§€ (maejang.com)
maejang.com {
    root * /home/ubuntu/D2C/01_Homepage
    file_server
    try_files {path} {path}/ /index.html
    
    log {
        output file /var/log/caddy/maejang.access.log
    }
}

# 2. ê³ ê°ìš© í˜ì´ì§€ (pizzaschool.maejang.com)
pizzaschool.maejang.com {
    
    # [ìš°ì„ ìˆœìœ„ 1] ë°±ì—”ë“œ API
    handle /api/* {
        reverse_proxy localhost:8080
    }

    # [ìš°ì„ ìˆœìœ„ 2] ê´€ë¦¬ì í˜ì´ì§€
    handle_path /admin/* {
        root * /home/ubuntu/D2C/02_Owner
        file_server
        
        # ë£¨íŠ¸(/)ë‚˜ index.html ìš”ì²­ ì‹œ ê°•ì œë¡œ 01_Loading.htmlë¡œ ë³€ê²½
        rewrite / /01_Loading.html
        rewrite /index.html /01_Loading.html
        
        try_files {path} {path}/ /01_Loading.html
    }

    # [ìš°ì„ ìˆœìœ„ 3] ë‚˜ë¨¸ì§€ ëª¨ë“  ìš”ì²­ (ê³ ê°ìš© ì •ì  íŒŒì¼)
    handle {
        root * /home/ubuntu/D2C/03_Customer
        file_server
        
        # ğŸ”¥ í•µì‹¬ ìˆ˜ì •: ë£¨íŠ¸(/) ì ‘ì† ì‹œ ë¬´ì¡°ê±´ 01_Loading.htmlë¡œ ë‚´ë¶€ ë³€ê²½
        rewrite / /01_Loading.html
        
        try_files {path} {path}/ /01_Loading.html
    }

    log {
        output file /var/log/caddy/pizzaschool.access.log
    }
}
