# 1. 메인 랜딩 페이지 (maejang.com)
maejang.com {
    # 절대 경로 사용 (/home/ubuntu/D2C/...)
    root * /home/ubuntu/D2C/01_Homepage
    
    file_server

    log {
        output file /var/log/caddy/maejang.access.log
    }
}

# 2. 고객용 페이지 (pizzaschool.maejang.com)
pizzaschool.maejang.com {
    # 절대 경로 사용
    root * /home/ubuntu/D2C/03_Customer

    file_server

    try_files {path} {path}/ /01_Loading.html

    # 3. 사장님용 페이지 (/admin 경로)
    handle_path /admin/* {
        root * /home/ubuntu/D2C/02_Owner
        file_server
        try_files {path} {path}/ /01_Loading.html
    }

    # 4. 백엔드 API 프록시
    handle /api/* {
        reverse_proxy localhost:8080
    }

    log {
        output file /var/log/caddy/pizzaschool.access.log
    }
}
