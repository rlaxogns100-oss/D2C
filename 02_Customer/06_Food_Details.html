<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>06 Food Details</title>
  <link rel="stylesheet" href="style.css">
  <!-- âš ï¸ LocalStorage Service (DB ì—°ë™ ì‹œ ì´ ì¤„ ì‚­ì œ) -->
  <script src="storage.js"></script>
</head>
<body>
  <div class="screen-label">Food_Details</div>
  
  <div class="container">
    <!-- Food Details Card -->
    <div class="food-details">
      <!-- Image with Back and Favorite Buttons -->
      <div class="image-card">
        <button class="icon-btn back-btn" onclick="history.back()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        
        <button class="icon-btn favorite-btn active">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
        </button>
      </div>
      
      <!-- Food Name and Location -->
      <h2 class="restaurant-name">Burger Bistro</h2>
      
      <div class="restaurant-subtitle">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
          <circle cx="12" cy="10" r="3"/>
        </svg>
        <span>Rose Garden</span>
      </div>
      
      <!-- Info Section -->
      <div class="info-section">
        <div class="info-item rating">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span>4.7</span>
        </div>
        
        <div class="info-item delivery">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="1" y="3" width="15" height="13" rx="2"/>
            <path d="M16 8h4l3 3v5h-3"/>
            <circle cx="5.5" cy="18.5" r="2.5"/>
            <circle cx="18.5" cy="18.5" r="2.5"/>
          </svg>
          <span>Free</span>
        </div>
        
        <div class="info-item time">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <span>20 min</span>
        </div>
      </div>
      
      <!-- Description -->
      <p class="description">Maecenas sed diam eget risus varius blandit sit amet non magna. Integer posuere erat a ante venenatis dapibus posuere velit aliquet.</p>
      
      <!-- Size Selection -->
      <div class="size-section">
        <h3>SIZE:</h3>
        <div class="size-options">
          <button class="size-option" onclick="selectSize(this, 28)">10"</button>
          <button class="size-option active" onclick="selectSize(this, 32)">14"</button>
          <button class="size-option" onclick="selectSize(this, 36)">16"</button>
        </div>
      </div>
      
      <!-- Price and Counter -->
      <div class="price-section">
        <div class="price" id="price">$32</div>
        <div class="counter">
          <button class="counter-btn" onclick="decreaseQuantity()">âˆ’</button>
          <span class="counter-value" id="quantity">2</span>
          <button class="counter-btn" onclick="increaseQuantity()">+</button>
        </div>
      </div>
      
      <!-- Add to Cart Button -->
      <button class="btn-primary" onclick="addToCart()">ADD TO CART</button>
    </div>
  </div>
  
  <script>
    /* ==========================================================================
       ğŸ” ìŒì‹ ìƒì„¸ í˜ì´ì§€ ë¡œì§
       
       âš ï¸ DB ì—°ë™ ì‹œ ìˆ˜ì • í•„ìš”:
       - CartStorage.addItem() â†’ fetch('/api/cart', {method:'POST'})
       ========================================================================== */
    
    // ì´ˆê¸° ê°’ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨)
    let quantity = 2;
    let basePrice = 32;
    let currentPrice = basePrice;
    const productId = 'PROD001'; // âš ï¸ DB: URL íŒŒë¼ë¯¸í„°ë‚˜ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ê¸°
    const productName = 'Burger Bistro';
    const restaurant = 'Rose Garden';
    
    // ìˆ˜ëŸ‰ ì¦ê°€
    function increaseQuantity() {
      quantity++;
      document.getElementById('quantity').textContent = quantity;
      updateTotalPrice();
    }
    
    // ìˆ˜ëŸ‰ ê°ì†Œ (ìµœì†Œ 1)
    function decreaseQuantity() {
      if (quantity > 1) {
        quantity--;
        document.getElementById('quantity').textContent = quantity;
        updateTotalPrice();
      }
    }
    
    // ì‚¬ì´ì¦ˆ ì„ íƒ
    function selectSize(button, price) {
      // ëª¨ë“  ì‚¬ì´ì¦ˆ ë²„íŠ¼ì˜ active í´ë˜ìŠ¤ ì œê±°
      document.querySelectorAll('.size-option').forEach(btn => {
        btn.classList.remove('active');
      });
      // ì„ íƒí•œ ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
      button.classList.add('active');
      
      // ê¸°ë³¸ ê°€ê²© ë³€ê²½
      basePrice = price;
      currentPrice = price;
      updateTotalPrice();
    }
    
    // ì´ ê°€ê²© ì—…ë°ì´íŠ¸
    function updateTotalPrice() {
      const totalPrice = basePrice * quantity;
      document.getElementById('price').textContent = '$' + totalPrice;
    }
    
    // ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€
    function addToCart() {
      const sizeBtn = document.querySelector('.size-option.active');
      const size = sizeBtn.textContent;
      
      // ID ìƒì„± ì‹œ íŠ¹ìˆ˜ë¬¸ì(") ì œê±°í•˜ì—¬ ì•ˆì „í•œ ID ë§Œë“¤ê¸°
      const safeSize = size.replace(/["']/g, ''); 
      
      // ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ìƒì„±
      const cartItem = {
        id: `${productId}_${safeSize}`, // ì•ˆì „í•œ ID ì‚¬ìš©
        name: productName,
        restaurant: restaurant,
        price: basePrice,
        quantity: quantity,
        size: size // í‘œì‹œëŠ” ì›ë˜ëŒ€ë¡œ
      };
      
      // LocalStorageì— ì €ì¥
      CartStorage.addItem(cartItem); 
      
      // ì¥ë°”êµ¬ë‹ˆ ì´ë™ ì—¬ë¶€ í™•ì¸
      if (confirm(`${quantity}ê°œ (ì‚¬ì´ì¦ˆ: ${size})ê°€ ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤.\nì¥ë°”êµ¬ë‹ˆë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
        location.href = '07_Cart.html';
      } else {
        // ê³„ì† ì‡¼í•‘í•˜ê¸°: ìˆ˜ëŸ‰ ì´ˆê¸°í™” ë“± ì„ íƒì 
        quantity = 1;
        document.getElementById('quantity').textContent = quantity;
        updateTotalPrice();
      }
    }
  </script>
</body>
</html>
