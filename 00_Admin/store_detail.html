<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>매장 세부 관리 - D2C Admin</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="admin-container">
        <!-- 사이드바 -->
        <nav class="sidebar">
            <div class="logo-area">
                <h2>D2C Admin</h2>
            </div>
            <ul class="menu-list">
                <li class="menu-item active"><a href="index.html">매장 관리</a></li>
                <li class="menu-item"><a href="#">회원 관리</a></li>
                <li class="menu-item"><a href="#">주문 현황</a></li>
                <li class="menu-item"><a href="#">정산 관리</a></li>
                <li class="menu-item"><a href="#">설정</a></li>
            </ul>
        </nav>

        <!-- 메인 컨텐츠 -->
        <div class="main-content">
            <!-- 탑바 -->
            <header class="topbar">
                <div class="page-title">
                    <button class="btn-back" onclick="history.back()">← 돌아가기</button>
                    <span>매장 세부 관리</span>
                </div>
                <div class="user-info">
                    <span>Super Admin님</span>
                    <button class="btn-logout">로그아웃</button>
                </div>
            </header>

            <!-- 컨텐츠 영역 -->
            <main class="content-area">
                <div class="detail-container">
                    <!-- 매장 기본 정보 -->
                    <div class="info-section">
                        <h3 class="section-title">기본 정보</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="required">매장 상호</label>
                                <input type="text" id="storeName" placeholder="매장 이름을 입력하세요" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="required">카테고리</label>
                                <select id="category" required>
                                    <option value="">카테고리 선택</option>
                                    <option value="한식">한식</option>
                                    <option value="중식">중식</option>
                                    <option value="일식">일식</option>
                                    <option value="양식">양식</option>
                                    <option value="분식">분식</option>
                                    <option value="치킨">치킨</option>
                                    <option value="피자">피자</option>
                                    <option value="카페/디저트">카페/디저트</option>
                                </select>
                            </div>

                            <div class="form-group full-width">
                                <label class="required">매장 주소</label>
                                <input type="text" id="storeAddress" placeholder="예: 서울특별시 강남구 테헤란로 123" required>
                            </div>

                            <div class="form-group">
                                <label class="required">대표 연락처</label>
                                <input type="tel" id="storePhone" placeholder="010-1234-5678" required>
                            </div>

                            <div class="form-group">
                                <label>점주명</label>
                                <input type="text" id="ownerName" placeholder="점주 이름">
                            </div>
                        </div>
                    </div>

                    <!-- 영업 정보 -->
                    <div class="info-section">
                        <h3 class="section-title">영업 정보</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>영업 시작 시간</label>
                                <input type="time" id="openTime" value="09:00">
                            </div>

                            <div class="form-group">
                                <label>영업 종료 시간</label>
                                <input type="time" id="closeTime" value="22:00">
                            </div>

                            <div class="form-group">
                                <label>휴무일</label>
                                <div class="checkbox-group">
                                    <label><input type="checkbox" value="월"> 월</label>
                                    <label><input type="checkbox" value="화"> 화</label>
                                    <label><input type="checkbox" value="수"> 수</label>
                                    <label><input type="checkbox" value="목"> 목</label>
                                    <label><input type="checkbox" value="금"> 금</label>
                                    <label><input type="checkbox" value="토"> 토</label>
                                    <label><input type="checkbox" value="일"> 일</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>영업 상태</label>
                                <select id="storeStatus">
                                    <option value="active">영업중</option>
                                    <option value="休업">휴업</option>
                                    <option value="정지">영업 정지</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 배달 정보 -->
                    <div class="info-section">
                        <h3 class="section-title">배달 정보</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>최소 주문 금액</label>
                                <div class="input-with-unit">
                                    <input type="number" id="minOrderAmount" placeholder="12000" min="0">
                                    <span class="unit">원</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>배달 소요 시간</label>
                                <div class="input-with-unit">
                                    <input type="number" id="deliveryTime" placeholder="30" min="0">
                                    <span class="unit">분</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>배달비</label>
                                <div class="input-with-unit">
                                    <input type="number" id="deliveryFee" placeholder="3000" min="0">
                                    <span class="unit">원</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>배달 가능 지역</label>
                                <select id="deliveryArea" multiple>
                                    <option value="강남구">강남구</option>
                                    <option value="서초구">서초구</option>
                                    <option value="송파구">송파구</option>
                                    <option value="강동구">강동구</option>
                                    <option value="마포구">마포구</option>
                                    <option value="용산구">용산구</option>
                                    <option value="중구">중구</option>
                                </select>
                                <small class="helper-text">Ctrl/Cmd를 누르고 클릭하여 여러 지역 선택</small>
                            </div>

                            <div class="form-group full-width">
                                <label>배달 가능 지역 상세</label>
                                <textarea id="deliveryAreaDetail" rows="3" placeholder="예: 강남역 2km 이내, 역삼동, 논현동 일대"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 매장 소개 -->
                    <div class="info-section">
                        <h3 class="section-title">매장 소개</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label>매장 설명</label>
                                <textarea id="storeDescription" rows="5" placeholder="매장을 소개하는 내용을 입력하세요"></textarea>
                            </div>

                            <div class="form-group full-width">
                                <label>매장 이미지</label>
                                <div class="image-upload-area">
                                    <input type="file" id="storeImage" accept="image/*" style="display: none;">
                                    <button type="button" class="btn-upload" onclick="document.getElementById('storeImage').click()">
                                        이미지 업로드
                                    </button>
                                    <div id="imagePreview" class="image-preview"></div>
                                </div>
                                <small class="helper-text">권장 크기: 800x600px, 최대 5MB</small>
                            </div>
                        </div>
                    </div>

                    <!-- 추가 정보 -->
                    <div class="info-section">
                        <h3 class="section-title">추가 정보</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>사업자 등록번호</label>
                                <input type="text" id="businessNumber" placeholder="123-45-67890">
                            </div>

                            <div class="form-group">
                                <label>정산 수수료</label>
                                <div class="input-with-unit">
                                    <input type="number" id="commission" placeholder="15" min="0" max="100" step="0.1">
                                    <span class="unit">%</span>
                                </div>
                            </div>

                            <div class="form-group full-width">
                                <label>관리자 메모</label>
                                <textarea id="adminMemo" rows="3" placeholder="내부 관리용 메모"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 버튼 영역 -->
                    <div class="action-buttons">
                        <button type="button" class="btn-secondary" onclick="history.back()">취소</button>
                        <button type="button" class="btn-primary" onclick="saveStoreInfo()">저장</button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // URL에서 매장 ID 가져오기
        const urlParams = new URLSearchParams(window.location.search);
        const storeId = urlParams.get('id');

        // 페이지 로드 시 매장 정보 불러오기 (더미 데이터)
        window.addEventListener('DOMContentLoaded', () => {
            loadStoreInfo(storeId);
        });

        // 매장 정보 불러오기 (더미 함수)
        function loadStoreInfo(id) {
            // 실제로는 서버에서 데이터를 가져와야 함
            const dummyData = {
                '101': {
                    storeName: '맛있는 떡볶이',
                    category: '분식',
                    storeAddress: '서울특별시 강남구 테헤란로 123',
                    storePhone: '010-1234-5678',
                    ownerName: '김철수',
                    openTime: '09:00',
                    closeTime: '22:00',
                    minOrderAmount: '12000',
                    deliveryTime: '30',
                    deliveryFee: '3000',
                    storeDescription: '매콤달콤한 떡볶이 전문점입니다.',
                    businessNumber: '123-45-67890',
                    commission: '15'
                },
                '102': {
                    storeName: '강남 피자',
                    category: '양식',
                    storeAddress: '서울특별시 강남구 역삼로 456',
                    storePhone: '010-9876-5432',
                    ownerName: '이영희',
                    openTime: '11:00',
                    closeTime: '23:00',
                    minOrderAmount: '15000',
                    deliveryTime: '40',
                    deliveryFee: '3500',
                    storeDescription: '정통 이탈리안 피자를 제공합니다.',
                    businessNumber: '234-56-78901',
                    commission: '18'
                }
            };

            if (id && dummyData[id]) {
                const data = dummyData[id];
                document.getElementById('storeName').value = data.storeName || '';
                document.getElementById('category').value = data.category || '';
                document.getElementById('storeAddress').value = data.storeAddress || '';
                document.getElementById('storePhone').value = data.storePhone || '';
                document.getElementById('ownerName').value = data.ownerName || '';
                document.getElementById('openTime').value = data.openTime || '';
                document.getElementById('closeTime').value = data.closeTime || '';
                document.getElementById('minOrderAmount').value = data.minOrderAmount || '';
                document.getElementById('deliveryTime').value = data.deliveryTime || '';
                document.getElementById('deliveryFee').value = data.deliveryFee || '';
                document.getElementById('storeDescription').value = data.storeDescription || '';
                document.getElementById('businessNumber').value = data.businessNumber || '';
                document.getElementById('commission').value = data.commission || '';
            }
        }

        // 이미지 미리보기
        document.getElementById('storeImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="매장 이미지">`;
                };
                reader.readAsDataURL(file);
            }
        });

        // 매장 정보 저장
        function saveStoreInfo() {
            // 필수 항목 확인
            const storeName = document.getElementById('storeName').value;
            const category = document.getElementById('category').value;
            const storeAddress = document.getElementById('storeAddress').value;
            const storePhone = document.getElementById('storePhone').value;

            if (!storeName || !category || !storeAddress || !storePhone) {
                alert('필수 항목을 모두 입력해주세요.');
                return;
            }

            // 실제로는 서버에 데이터를 전송해야 함
            const formData = {
                storeId: storeId,
                storeName: storeName,
                category: category,
                storeAddress: storeAddress,
                storePhone: storePhone,
                ownerName: document.getElementById('ownerName').value,
                openTime: document.getElementById('openTime').value,
                closeTime: document.getElementById('closeTime').value,
                storeStatus: document.getElementById('storeStatus').value,
                minOrderAmount: document.getElementById('minOrderAmount').value,
                deliveryTime: document.getElementById('deliveryTime').value,
                deliveryFee: document.getElementById('deliveryFee').value,
                deliveryAreaDetail: document.getElementById('deliveryAreaDetail').value,
                storeDescription: document.getElementById('storeDescription').value,
                businessNumber: document.getElementById('businessNumber').value,
                commission: document.getElementById('commission').value,
                adminMemo: document.getElementById('adminMemo').value
            };

            console.log('저장할 데이터:', formData);
            alert('매장 정보가 저장되었습니다.');
            // window.location.href = 'index.html';
        }
    </script>
</body>
</html>

